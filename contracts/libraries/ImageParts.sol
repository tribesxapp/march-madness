// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "./ImageBetTexts.sol";

library ImageParts {
    function buildCircles(
        uint8[7] memory betValidator
    ) external pure returns (string memory) {
        return 
            string(
                abi.encodePacked(
                    ImageBetTexts.buildCircles1([
                        betValidator[0],
                        betValidator[1],
                        betValidator[2],
                        betValidator[3]
                    ]),
                    ImageBetTexts.buildCircles2([
                        betValidator[4],
                        betValidator[5],
                        betValidator[6]
                    ])
                )
            );
    }

    function buildBets(
        string[7] memory tokens
    ) external pure returns (string memory) {
        return 
            string(
                abi.encodePacked(
                    ImageBetTexts.buildBetsRound1([
                        tokens[0],
                        tokens[1],
                        tokens[2],
                        tokens[3]
                    ]),
                    ImageBetTexts.buildBetsRound2([
                        tokens[4],
                        tokens[5],
                        tokens[6]
                    ])
                )
            );
    }

    function perfectPoolText() public pure returns (string memory) {
        return
            string(
                abi.encodePacked(
                    '<path d="M92.693 81.69c1.027 1.012 1.54 2.503 1.54 4.476 0 1.972-.513 3.472-1.54 4.5-1.01 1.01-2.442 1.516-4.297 1.516h-3.403v5.669H81.54V80.149h6.856c1.855 0 3.287.514 4.297 1.542Zm-1.913 4.476c0-1.956-.852-2.934-2.558-2.934h-3.23v5.843h3.23c.828 0 1.457-.224 1.888-.672.447-.447.67-1.193.67-2.237Zm17.262 11.684h-6.259c-1.987 0-3.387-.34-4.198-1.019-.795-.696-1.192-1.914-1.192-3.654V80.149h11.649v3.083h-8.197v4.152h5.738l-.248 3.083h-5.49v2.461c0 .696.158 1.177.472 1.442.315.265.886.398 1.714.398h6.011v3.083Zm16.034 0h-4l-3.452-6.563h-2.484v6.564h-3.453V83.953c0-1.326.306-2.287.919-2.884.613-.613 1.639-.92 3.08-.92h2.931c1.756 0 3.147.539 4.173 1.616 1.044 1.06 1.565 2.412 1.565 4.053 0 1.193-.314 2.229-.944 3.107-.612.862-1.374 1.459-2.285 1.79l3.95 7.136Zm-6.682-9.447c.728 0 1.325-.248 1.788-.746.48-.513.721-1.143.721-1.89 0-.761-.232-1.375-.696-1.839-.447-.464-1.052-.696-1.813-.696h-1.714c-1.027 0-1.54.522-1.54 1.566v3.605h3.254Zm20.45-5.171h-6.235c-.728 0-1.242.14-1.54.423-.281.281-.422.77-.422 1.466v2.462h6.483l-.248 3.083h-6.235v7.185h-3.453V83.754c0-1.31.282-2.237.845-2.784.58-.547 1.565-.82 2.956-.82h7.849v3.082Zm13.907 14.618h-6.26c-1.987 0-3.386-.34-4.198-1.019-.795-.696-1.192-1.914-1.192-3.654V80.149h11.65v3.083h-8.198v4.152h5.738l-.248 3.083h-5.49v2.461c0 .696.158 1.177.472 1.442.315.265.886.398 1.714.398h6.012v3.083Zm11.587-6.861h3.204c0 2.254-.563 3.986-1.689 5.196-1.126 1.21-2.716 1.815-4.769 1.815-4.521 0-6.782-2.66-6.782-7.98v-1.492c0-4.194 1.16-6.82 3.478-7.882.911-.43 2.012-.646 3.304-.646 1.887 0 3.419.522 4.595 1.566 1.192 1.028 1.788 2.52 1.788 4.475h-3.229c-.182-.977-.505-1.715-.969-2.212-.463-.497-1.192-.746-2.185-.746-1.16 0-2.021.365-2.584 1.094-.397.514-.629 1.392-.695 2.635-.033.398-.05.937-.05 1.616v1.541c0 1.907.265 3.208.795 3.904.546.696 1.391 1.044 2.534 1.044 1.159 0 1.954-.315 2.384-.945.447-.646.737-1.64.87-2.983Zm16.901-7.757h-4.744v14.619h-3.453V83.232h-4.72v-3.083h12.917v3.083Zm18.126-1.542c1.027 1.012 1.54 2.503 1.54 4.476 0 1.972-.513 3.472-1.54 4.5-1.01 1.01-2.443 1.516-4.297 1.516h-3.403v5.669h-3.453V80.149h6.856c1.854 0 3.287.514 4.297 1.542Zm-1.913 4.476c0-1.956-.853-2.934-2.558-2.934h-3.229v5.843h3.229c.828 0 1.457-.224 1.888-.672.447-.447.67-1.193.67-2.237Zm18.579 2.014v1.342c0 2.967-.563 5.121-1.689 6.464-1.11 1.343-2.898 2.014-5.366 2.014-2.467 0-4.256-.671-5.365-2.014-1.093-1.343-1.64-3.522-1.64-6.539v-1.292c0-2.752.555-4.799 1.665-6.141 1.126-1.343 2.898-2.014 5.315-2.014 2.435 0 4.223.68 5.366 2.039 1.142 1.359 1.714 3.406 1.714 6.14Zm-3.453 1.267v-.92c0-1.59-.199-2.859-.596-3.803-.464-1.094-1.457-1.641-2.981-1.641-1.54 0-2.542.547-3.006 1.64-.38.896-.571 2.164-.571 3.805v.92c0 2.138.298 3.58.894 4.325.232.315.572.589 1.019.82.463.216 1.01.324 1.639.324.646 0 1.193-.108 1.64-.323.447-.216.794-.48 1.043-.796.248-.315.439-.73.571-1.243.232-.812.348-1.848.348-3.108Zm18.693-1.267v1.342c0 2.967-.563 5.121-1.689 6.464-1.109 1.343-2.898 2.014-5.365 2.014-2.468 0-4.256-.671-5.366-2.014-1.093-1.343-1.639-3.522-1.639-6.539v-1.292c0-2.752.555-4.799 1.664-6.141 1.126-1.343 2.898-2.014 5.316-2.014 2.434 0 4.223.68 5.365 2.039 1.143 1.359 1.714 3.406 1.714 6.14Zm-3.452 1.267v-.92c0-1.59-.199-2.859-.597-3.803-.463-1.094-1.457-1.641-2.98-1.641-1.54 0-2.542.547-3.006 1.64-.381.896-.571 2.164-.571 3.805v.92c0 2.138.298 3.58.894 4.325.232.315.571.589 1.018.82.464.216 1.01.324 1.64.324.646 0 1.192-.108 1.639-.323.447-.216.795-.48 1.043-.796.249-.315.439-.73.572-1.243.232-.812.348-1.848.348-3.108Zm16.631 8.403h-5.266c-1.987 0-3.428-.38-4.322-1.143-.878-.779-1.317-2.039-1.317-3.779V80.15h3.453v12.78c0 .695.157 1.176.472 1.441.315.265.886.398 1.714.398h5.266v3.083Z" fill="#fff"/>'
                )
            );
    }

    function logo() public pure returns (string memory) {
        return
            string(
                abi.encodePacked(
                    '<path d="M73.821 80.088h-2.353c-.726 0-1.315.564-1.315 1.26v2.256c0 .696.589 1.26 1.315 1.26h2.353c.726 0 1.315-.564 1.315-1.26v-2.256c0-.696-.589-1.26-1.315-1.26Z" fill="#4C82FB"/>',
                    '<path d="M64.715 85.065h2.045a3.786 3.786 0 0 1 2.284.928l.077.084c.567.619.9 1.41.945 2.242v1.999c0 .348.141.682.392.929.251.246.591.384.946.384h2.394c.355 0 .695-.138.946-.384.251-.247.392-.58.392-.929v-2.35a1.3 1.3 0 0 0-.392-.93 1.35 1.35 0 0 0-.946-.384h-2.036a3.743 3.743 0 0 1-2.284-.928l-.085-.076a3.63 3.63 0 0 1-.946-2.241V81.4c0-.348-.14-.682-.391-.928a1.351 1.351 0 0 0-.946-.385h-2.395a1.35 1.35 0 0 0-.946.385c-.25.246-.391.58-.391.928v2.35c0 .349.14.683.392.93.25.246.59.384.945.384Z" fill="#1DB954"/>',
                    '<path d="M74.02 93.128h-2a3.656 3.656 0 0 1-2.231-.94l-.225-.22a3.523 3.523 0 0 1-.924-2.192v-1.961a1.28 1.28 0 0 0-.386-.906 1.328 1.328 0 0 0-.922-.378h-1.998a3.634 3.634 0 0 1-2.232-.883l-.224-.22a3.522 3.522 0 0 1-.925-2.191v-1.954c0-.34-.137-.666-.383-.907a1.32 1.32 0 0 0-.924-.376h-2.34c-.346 0-.679.135-.924.376a1.27 1.27 0 0 0-.383.907v2.297c0 .34.138.667.383.908.245.24.578.376.924.376h1.99c.84.037 1.641.361 2.265.915l.225.22c.553.607.879 1.38.924 2.192v1.962c.002.34.14.664.386.905.244.24.576.376.922.378h1.998c.819.05 1.596.37 2.207.907l.224.22c.553.607.879 1.38.925 2.192v1.961c.002.34.14.665.385.906.245.24.576.376.922.378h2.348c.346-.002.677-.138.922-.379a1.28 1.28 0 0 0 .385-.905v-2.305a1.28 1.28 0 0 0-.388-.908 1.328 1.328 0 0 0-.927-.375Zm-13.206.095h-2.447c-.755 0-1.367.564-1.367 1.26v2.256c0 .696.612 1.26 1.367 1.26h2.447c.756 0 1.368-.564 1.368-1.26v-2.255c0-.697-.612-1.26-1.368-1.26Z" fill="#4C82FB"/>',
                    '<path d="M67.244 93.023h-2.002a3.646 3.646 0 0 1-2.245-.929l-.083-.075a3.661 3.661 0 0 1-.93-2.258v-2.008a1.312 1.312 0 0 0-1.273-1.296h-2.396A1.316 1.316 0 0 0 57 87.77v2.35a1.312 1.312 0 0 0 1.315 1.313h2.01a3.689 3.689 0 0 1 2.245.929l.076.084c.557.619.885 1.41.93 2.241v2A1.312 1.312 0 0 0 64.898 98h2.345a1.316 1.316 0 0 0 1.315-1.313v-2.35a1.312 1.312 0 0 0-1.315-1.314Z" fill="#1DB954"/>'
                )
            );
    }

    function victoryLogo() public pure returns (string memory) {
        return
            string(
                abi.encodePacked(
                    '<g filter="url(#c)">',
                    '<path d="m215.977 308-3.765 3.929-15.169 15.169-4.42-4.256-3.929-3.929-7.694 7.694 3.929 3.929 8.185 8.185 3.765 3.929 3.929-3.929 19.098-19.098 3.929-3.929-7.858-7.694Z" fill="#1DB954"/>',
                    "</g>"
                )
            );
    }

    function lostLogo() public pure returns (string memory) {
        return
            string(
                abi.encodePacked(
                    '<g filter="url(#filter0_d_575_1231)">',
                    '<path d="M189.825 308L183 314.825L186.485 318.311L195.102 327.073L186.485 335.689L183 339.029L189.825 346L193.311 342.515L202.073 333.753L210.689 342.515L214.029 346L221 339.029L217.515 335.689L208.753 327.073L217.515 318.311L221 314.825L214.029 308L210.689 311.485L202.073 320.102L193.311 311.485L189.825 308Z" fill="#FF2E47"/>'
                    "</g>"
                )
            );
    }

    function defsSvg() public pure returns (string memory) {
        return
            string(
                abi.encodePacked(
                    '<defs><linearGradient id="b" x1="150" y1="0" x2="150" y2="500" gradientUnits="userSpaceOnUse"><stop stop-color="#202738"/><stop offset="1" stop-color="#070816"/></linearGradient>',
                    '<linearGradient id="d" x1="108" y1="66" x2="109.881" y2="41.593" gradientUnits="userSpaceOnUse"><stop offset=".1" stop-color="#1DB954"/><stop offset="1" stop-color="#0062FF"/></linearGradient>',
                    '<clipPath id="a"><rect width="300" height="500" rx="30" fill="#fff"/></clipPath><filter id="c" x="177" y="308" width="50.835" height="42.65" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">',
                    '<feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="4"/><feGaussianBlur stdDeviation="2"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_575_1231"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_575_1231" result="shape"/>',
                    "</filter></defs>"
                )
            );
    }

    function squares() public pure returns (string memory) {
        return
            string(
                abi.encodePacked(
                    '<rect x="38.5" y="148.5" width="223" height="78" rx="9.5" fill="#0D111C"/>',
                    '<rect x="38.5" y="234.5" width="223" height="55" rx="9.5" fill="#0D111C"/>',
                    '<rect x="38.5" y="297.5" width="223" height="55" rx="9.5" fill="#0D111C"/>',
                    '<rect x="38.5" y="148.5" width="223" height="78" rx="9.5" stroke="#1C253C"/>',
                    '<rect x="38.5" y="234.5" width="223" height="55" rx="9.5" stroke="#1C253C"/>',
                    '<rect x="38.5" y="297.5" width="223" height="55" rx="9.5" stroke="#1C253C"/>',
                    '<rect x="16" y="17" width="267" height="438" rx="29" stroke="#1C253C" stroke-width="2"/>',
                    '<rect x="48.5" y="173.5" width="100" height="21" rx="4.5" fill="#1B2236" stroke="#1C253C"/>',
                    '<rect x="151.5" y="173.5" width="100" height="21" rx="4.5" fill="#1B2236" stroke="#1C253C"/>',
                    '<rect x="48.5" y="197.5" width="100" height="20" rx="4.5" fill="#1B2236" stroke="#1C253C"/>',
                    '<rect x="151.5" y="197.5" width="100" height="20" rx="4.5" fill="#1B2236" stroke="#1C253C"/>',
                    '<rect x="48.5" y="259.5" width="100" height="21" rx="4.5" fill="#1B2236" stroke="#1C253C"/>',
                    '<rect x="151.5" y="259.5" width="100" height="21" rx="4.5" fill="#1B2236" stroke="#1C253C"/>',
                    '<rect x="48.5" y="322.5" width="100" height="21" rx="4.5" fill="#1B2236" stroke="#1C253C"/>',
                    '<rect x="90.5" y="403.5" width="120" height="31" rx="4.5" fill="#1B2236" stroke="#1C253C"/>'
                )
            );
    }

    function svgPartUp() public pure returns (string memory) {
        return
            string(
                abi.encodePacked(
                    defsSvg(),
                    '<g clip-path="url(#a)">',
                    '<rect width="300" height="500" rx="30" fill="#0D111C"/>',
                    '<path fill="url(#b)" d="M0 0h300v500H0z"/>',
                    perfectPoolText(),
                    logo(),
                    squares(),
                    '<text style="font-size:12px;fill:#fff;font-family:arial;font-weight:700" x="48" y="167">Round 1</text>',
                    '<text style="font-size:12px;fill:#fff;font-family:arial;font-weight:700" x="48" y="253">Round 2</text>',
                    '<text style="font-size:12px;fill:#fff;font-family:arial;font-weight:700" x="48" y="316">Final Round</text>'
                )
            );
    }

    function svgPartDown(uint8 status, bool victory) public pure returns (string memory) {
        return
            string(
                abi.encodePacked(
                    ImageBetTexts.betTexts(),
                    '<text style="font-size:15.3px;fill:#98A1C0;font-family:arial" x="99" y="424">NFT ID:</text>',
                    status == 4 ? (victory ? victoryLogo() : lostLogo()) : "",
                    "</g>"
                )
            );
    }
}
